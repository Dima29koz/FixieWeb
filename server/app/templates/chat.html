{% extends 'base.html' %}

{% block title %}
Мессенджер
{% endblock %}

{% block script %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='scripts/chat_page.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/socketio.js') }}"></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/chat_style.css') }}">
{% endblock %}

{% block main %}
<div class="container">
    <!-- Flash error messages -->
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <p class=formError>{{ messages[0] }}</p>
        {% endif %}
    {% endwith %}

    <div class="wrapper">
        <!-- Main section start -->
        <div id="main-section">

            <!-- Sidebar start -->
            <nav id="sidebar">
                <h4>Rooms</h4>
                {% for room in rooms %}
                    <p id="{{ room|title }}" class="select-room cursor-pointer">{{ room|title }}</p>
                {% endfor %}
            </nav>
            <!-- Sidebar end -->

            <!-- Rightside pannel start -->
            <div id="rightside-pannel">

                <!-- Display message start-->
                <div id="display-message-section">
                </div>
                <!-- Display message end -->

                <!-- Type message start -->
               <div id="input-area" class="input-group mb-3">
                    <input type="text" id="user_message" class="form-control" placeholder="Type here..." aria-label="Type a message" aria-describedby="basic-addon2" autocomplete="off">
                    <div class="input-group-append">
                        <button id="send_message" class="btn btn-warning" type="button">SEND <i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
                <!-- Type message end -->
            </div>
            <!-- Rightside pannel end -->
        </div>
        <!-- Main section end -->
    </div>
    <!-- Wrapper end -->

    <!-- Get username -->
    <span id="get-username">{{ username }}</span>

</div>
{% endblock %}